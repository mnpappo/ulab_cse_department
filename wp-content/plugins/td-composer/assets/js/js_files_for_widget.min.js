var tdcAdminIFrameUI;
(function(e,b,d,a){tdcAdminIFrameUI={_liveIframeWindowObject:a,_$liveIframe:a,getIframeWindow:function(){d.isUndefined(tdcAdminIFrameUI._liveIframeWindowObject)&&new tdcNotice.notice("tdcAdminIFrameUI._liveIframeWindowObject is undefined. AKA: The iFrame window object is undefined. The iFrame was probably not added to the page!",!0,!1);return tdcAdminIFrameUI._liveIframeWindowObject},getLiveIframe:function(){return tdcAdminIFrameUI._$liveIframe},evalInIframe:function(a){tdcAdminIFrameUI.getIframeWindow().eval(a)},initContent:function(a){a.find(".tdc-row").length||
(a.find(".tdc-content-wrap").prepend('<div class="tdc-row"><div class="vc_row wpb_row td-pb-row"><div class="tdc-column"><div class="td-pb-span12 wpb_column vc_column_container"><div class="wpb_wrapper"></div></div></div></div></div>'),window.tdcPostSettings.postContent+="[vc_row][vc_column][/vc_column][/vc_row]")},init:function(){window.addWrappers=function(a){a=a.find(".td-main-content-wrap");a.find(".tdc-row").wrapAll('<div id="tdc-rows"></div>').each(function(a,c){e(c).find(".tdc-column").wrapAll('<div class="tdc-columns"></div>')});
a.find(".tdc-column").each(function(a,c){var b=e(c);b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');b=b.find(".td_block_wrap");window.checkTdBlockWrap(b);b.wrap('<div class="tdc-element"></div>')});a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),
b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){var b=e(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){var b=e(c).find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,
c){var b="",h=e(c);h.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":h.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be remove by composer"></div>');tdcElementUI.bindEmptyElement(b);h.append(b)})};window.addRowWrappers=function(a){a.find(".tdc-column").wrapAll('<div class="tdc-columns"></div>');a.find(".tdc-column").each(function(a,c){var b=e(c);b.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');
b=b.find(".td_block_wrap");window.checkTdBlockWrap(b);b.wrap('<div class="tdc-element"></div>')});a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,
c){var b=e(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});a.find(".tdc-column").each(function(a,c){var b=e(c).find(".tdc-element, .tdc-element-inner-row");b.length?b.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))});a.find(".tdc-elements:empty").each(function(a,c){var b="",g=e(c);g.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":g.closest(".tdc-column").length&&
(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be remove by composer"></div>');tdcElementUI.bindEmptyElement(b);g.append(b)})};window.addColumnWrappers=function(a){a.find(".tdc-inner-row").wrap('<div class="tdc-element-inner-row"></div>');var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.wrap('<div class="tdc-element"></div>');a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,
c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-element, .tdc-element-inner-row").each(function(a,c){var b=e(c);b.length&&b.not(".tdc-element-inner-column").addClass("tdc-element-column")});c=a.find(".tdc-element, .tdc-element-inner-row");c.length?c.not(".tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,c){var b="",g=e(c);g.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":g.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be remove by composer"></div>');tdcElementUI.bindEmptyElement(b);g.append(b)})};window.addInnerRowWrappers=function(a){var c=a.find(".td_block_wrap");
window.checkTdBlockWrap(c);c.wrap('<div class="tdc-element"></div>');a.find(".tdc-inner-row").each(function(a,c){e(c).find(".tdc-inner-column").wrapAll('<div class="tdc-inner-columns"></div>').each(function(a,c){var b=e(c).find(".tdc-element");b.length?b.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):(b=e(c).find(".wpb_wrapper"),b.length&&b.append('<div class="tdc-elements"></div>'))})});a.find(".tdc-elements:empty").each(function(a,c){var b="",g=e(c);g.closest(".tdc-inner-column").length?
b=" tdc-element-inner-column":g.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be remove by composer"></div>');tdcElementUI.bindEmptyElement(b);g.append(b)})};window.addInnerColumnWrappers=function(a){var c=a.find(".td_block_wrap");window.checkTdBlockWrap(c);c.wrap('<div class="tdc-element"></div>');c=a.find(".tdc-element");c.length?c.addClass("tdc-element-inner-column").wrapAll('<div class="tdc-elements"></div>'):
(c=a.find(".wpb_wrapper"),c.length&&c.append('<div class="tdc-elements"></div>'));a.find(".tdc-elements:empty").each(function(a,c){var b="",g=e(c);g.closest(".tdc-inner-column").length?b=" tdc-element-inner-column":g.closest(".tdc-column").length&&(b=" tdc-element-column");b=e('<div class="'+tdcOperationUI._emptyElementClass+b+'" title="Empty element that should be remove by composer"></div>');tdcElementUI.bindEmptyElement(b);g.append(b)})};window.checkTdBlockWrap=function(a){0===parseInt(a.height())&&
0===parseInt(a.parent().height())&&a.addClass("tdc-block-empty")};var a=window.tdcPostSettings.postMetaVcJsStatus,b=window.tdcPostSettings.postContent;"1"!==window.tdcPostSettings.postMetaDirtyContent&&"true"!==a||""===b||new tdcNotice.notice("The current content page hasn't been created by TagDiv Composer!",!1,!1);tdcAdminIFrameUI.checkIframe(tdcAdminIFrameUI._$liveIframe)},loadIframe:function(){var c=e(this).contents();tdcAdminIFrameUI.initContent(c);tdcAdminIFrameUI._liveIframeWindowObject=e(this).get(0).contentWindow;
var b=e('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');c.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=a;window.addWrappers(c);tdcIFrameData.init(c,!0);tdcOperationUI.init(c,!0);c.on("click","a",function(a){a.preventDefault();"undefined"!==this.href&&window.open(this.href,"_blank")});c[0].addEventListener("mousedown",function(a){1!==a.which&&a.stopPropagation()},!0);c[0].addEventListener("mousemove",function(a){c.lastMouseEvent=
a},!0)},checkIframe:function(c){if(d.isUndefined(c))c=window.tdcPostSettings.postUrl,c=0>c.indexOf("?")?c+("?td_action=tdc_edit&post_id="+window.tdcPostSettings.postId):c+("&td_action=tdc_edit&post_id="+window.tdcPostSettings.postId),c=e('<iframe id="tdc-live-iframe" name="tdc-live-iframe" src="'+c+'" scrolling="auto" style="width: 100%; height: 100%"></iframe>').load(tdcAdminIFrameUI.loadIframe),e("#tdc-live-iframe-wrapper").append(c);else{var b=c,h=b.contents();tdcAdminIFrameUI.initContent(h);tdcAdminIFrameUI._liveIframeWindowObject=
b.get(0).contentWindow;b=e('<div id="tdc-recycle"><div class="tdc-delete-text"><span>Delete</span></div></div>');h.find("body").prepend(b);tdcAdminWrapperUI.$recycle=b;tdcIFrameData._postOriginalContentJSON=a;window.addWrappers(h);tdcIFrameData.init(h,!0);tdcOperationUI.init(h,!0);h.find("a").each(function(a,c){c.setAttribute("target","_blank")});c.removeClass("tdc-live-iframe");c.removeClass("tdc-live-iframe-temp")}tdcAdminIFrameUI._$liveIframe=c}}})(jQuery,Backbone,_);var tdcCssEditor={};
(function(e,b,d){tdcCssEditor={_mappedParameter:d,_model:d,_currentViewportSettings:{name:"all",settings:d},_currentCssSettings:d,_INHERITED_CSS_CLASS:"tdc-css-inherited",_INACTIVE_CSS_CLASS:"tdc-css-inactive",_isInitialized:!1,init:function(){tdcCssEditor._isInitialized||(tdcCssEditor._bindEvents(),tdcCssEditor._isInitialized=!0)},tdcCssImageWrapHandler:function(a){var c=e(a.currentTarget),g=c.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(c);
e(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");e(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");e(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(a){var d=e("img",a).attr("src"),h="";"undefined"===typeof d?(d=e(a).attr("src"),h=e(a).attr("class")):h=e("img",a).attr("class");e.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:h,action:"tdc_ajax_get_image_id"}}).done(function(a,h,f){if("success"===h)if(b.isObject(a)&&b.has(a,"errors"))new tdcNotice.notice(a.errors,!0,!1);else{h=c.closest(".tdc-property-wrap");f=h.find(".tdc-css-image-remove");var e=h.find(".tdc-inherit-image");f.removeClass("tdc-hidden-button");"all"===tdcCssEditor._currentViewportSettings.name?e.hide():e.show();c.attr("style","background-image: url( '"+d+"') ");c.data("image_link",
d);c.data("image_id",a.image_id);window.send_to_editor=window.original_send_to_editor;window.tb_remove();h.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"undefined"===typeof c.data("model_id")?tdcCssEditor.saveWidgetForm(c):(a=tdcCssEditor._generateCssAttValue(g),h=tdcIFrameData.getModel(c.data("model_id")),tdcSidebarController.onUpdate(h,c.data("param_name"),"",a))}}).fail(function(a,c,b){})};return!1},tdcCssImageRemoveHandler:function(a){var c=e(a.currentTarget),g=c.closest(".tdc-property-wrap");
a=g.find(".tdc-css-image-wrap");var d=g.find(".tdc-inherit-image");c.addClass("tdc-hidden-button");"all"!==tdcCssEditor._currentViewportSettings.name&&d.show();g.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);a.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'");"all"===tdcCssEditor._currentViewportSettings.name?a.data("image_link",""):a.data("image_link","no_value");d=a.data("model_id");b.isUndefined(d)?tdcCssEditor.saveWidgetForm(c):(c=
g.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),d=tdcIFrameData.getModel(d),tdcSidebarController.onUpdate(d,a.data("param_name"),"",c))},_updateColorField:function(a){var c=a.closest(".tdc-property-wrap"),g=c.data("tdc-for"),d=c.find(".tdc-inherit-color"),f=c.find(".wp-color-result"),e=a.data("no_value"),m=a.data("default_value");b.isUndefined(e)||1!==e?("all"!==tdcCssEditor._currentViewportSettings.name&&d.show(),tdcCssEditor._updateData(a),d={isInherited:!1},g=tdcCssEditor._getSettingsProperty(g,
"",d),d.isInherited?(a.attr("placeholder",g),a.val(""),c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),f.attr("style","background-color: "+tdcCssEditor._getRgba(g))):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),tdcCssEditor._checkDefaultColor(a))):(a.val("no_value"),tdcCssEditor._updateData(a),a.val(""),b.isUndefined(m)||f.attr("style","background-color: "+tdcCssEditor._getRgba(m)),tdcCssEditor._checkDefaultColor(a))},_clearColorPicker:function(a){a=e(a.currentTarget).closest(".tdc-property-wrap");
var c=a.closest(".tdc-tab-content"),b=a.find("input.wp-color-picker"),d=a.find(".tdc-inherit-color");a.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);"all"!==tdcCssEditor._currentViewportSettings.name&&(b.data("no_value",1),b.attr("placeholder",""),d.show());tdcCssEditor._checkDefaultColor(b);c.hasClass("tdc-tab-widget")&&(b.val(""),b.trigger("keyup"))},_showColorPicker:function(a){a=e(a.currentTarget).closest(".tdc-property-wrap").find("input.wp-color-picker");"no_value"===a.val()&&a.val("")},_changeColor:function(a){var c=
e(a.currentTarget).closest(".wp-picker-container").find("input.wp-color-picker");""!==c.val()&&c.data("no_value",0);"keyup"===a.type?setTimeout(function(){tdcCssEditor._updateColorField(c)},100):tdcCssEditor._updateColorField(c)},_inheritSelect:function(a){a=e(a.currentTarget);var c=a.closest(".tdc-property-wrap"),g=c.data("tdc-for");b.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][g])||delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][g];
var h={isInherited:!1},g=tdcCssEditor._getSettingsProperty(g,d,h),f=c.find("select:first");h.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),a.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),a.show());b.isUndefined(g)?(f.val(f.find("option:first").val()),a.hide()):f.val(g);tdcCssEditor._updateData(f)},_inheritColor:function(a){a=e(a.currentTarget);var c=a.closest(".tdc-property-wrap"),g=c.find(".wp-color-picker"),h=c.find(".wp-color-result"),f=c.data("tdc-for");b.isUndefined(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][f])||
delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name][f];g.data("no_value",0);var q={isInherited:!1},f=tdcCssEditor._getSettingsProperty(f,d,q);q.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),a.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),a.show());b.isUndefined(f)?(g.val(""),a.hide(),tdcCssEditor._updateData(g),tdcCssEditor._checkDefaultColor(g)):(g.val(""),g.attr("placeholder",f),h.attr("style","background-color: "+tdcCssEditor._getRgba(f)),
tdcCssEditor._updateData(g))},_inheritImage:function(a){var c=e(a.currentTarget);a=c.closest(".tdc-property-wrap");var g=a.find(".tdc-css-image-wrap"),h=a.find(".tdc-css-image-remove");a.find(".tdc-inherit-image").hide();h.addClass("tdc-hidden-button");g.data("image_link","");h=g.data("model_id");b.isUndefined(h)?tdcCssEditor.saveWidgetForm(c):(c=a.closest(".tdc-tab-content"),c=tdcCssEditor._generateCssAttValue(c),h=tdcIFrameData.getModel(h),tdcSidebarController.onUpdate(h,g.data("param_name"),"",
c));h={isInherited:!1};c=tdcCssEditor._getSettingsProperty("background-image",d,h);h.isInherited?(a.addClass(tdcCssEditor._INHERITED_CSS_CLASS),g.attr("style","background-image: url('"+c+"'")):g.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png'")},_clearCssProperties:function(a){a=e(a.currentTarget);var c=a.data("model_id");tdConfirm.showModal("Clear CSS settings",tdcCssEditor,function(a,c){tdcCssEditor._currentCssSettings=d;if("undefined"===
typeof c)e(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent()),tdcCssEditor.doActionPanelRender(),tdcCssEditor.saveWidgetForm(e("."+a.get(0).className));else{var b=tdcIFrameData.getModel(c);tdcSidebarController.onUpdate(b,a.data("param_name"),"","");e(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender()}tb_remove()},[a,c],"Are you sure you want to clear all the CSS settings of the selected component?")},
_changeTextInput:function(a){var c=e(a.currentTarget),d=c.parent(),h=c;d.hasClass("tdc-box-margin")||d.hasClass("tdc-box-border")||d.hasClass("tdc-box-padding")||(h=c.closest(".tdc-property-wrap"));var d=h.data("tdc-for"),f={isInherited:!1},d=tdcCssEditor._getSettingsProperty(d,"",f);f.isInherited?(c.attr("placeholder",d),c.val(""),h.addClass(tdcCssEditor._INHERITED_CSS_CLASS)):h.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);h=1;c.hasClass("tdc-css-opacity")&&(h=.01);f=NaN;switch(a.type){case "keyup":switch(a.keyCode){case 38:e.isNumeric(d)&&
(f=parseFloat(d)+h);break;case 40:e.isNumeric(d)&&(f=parseFloat(d)-h)}break;case "mousewheel":e.isNumeric(d)&&(f=0<a.originalEvent.deltaY?parseFloat(d)-h:parseFloat(d)+h)}b.isNaN(f)||(1>h&&(f=f.toFixed(2)),c.val(f));tdcCssEditor._updateData(c)},_keydownTextInput:function(a){if(38===a.keyCode||40===a.keyCode)return!1},_changeDropDown:function(a){a=e(a.currentTarget);var c=a.closest(".tdc-property-wrap"),d=c.find(".tdc-inherit-select");c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);tdcCssEditor._updateData(a);
var h=c.data("tdc-for"),f={isInherited:!1};tdcCssEditor._getSettingsProperty(h,"",f);f.isInherited?(c.addClass(tdcCssEditor._INHERITED_CSS_CLASS),d.hide()):(c.removeClass(tdcCssEditor._INHERITED_CSS_CLASS),"all"===tdcCssEditor._currentViewportSettings.name?d.hide():0===a[0].selectedIndex?b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all[h])?d.hide():d.show():d.show())},doActionPanelRender:function(){tdcSidebarPanel._hook.doAction("panel_rendered");
tdcSidebarPanel._hook.doAction("panel_css")},_bindEvents:function(){var a=e("body");a.on("keydown",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-box-input",tdcCssEditor._changeTextInput);a.on("change keyup",".tdc-tab-design .tdc-css-bg-color",tdcCssEditor._changeColor);a.on("change keyup",".tdc-tab-design .tdc-css-border-color",tdcCssEditor._changeColor);a.on("change",".tdc-tab-design .tdc-css-border-style",tdcCssEditor._changeDropDown);
a.on("keydown",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-border-radius",tdcCssEditor._changeTextInput);a.on("change",".tdc-tab-design .tdc-css-bg-style",tdcCssEditor._changeDropDown);a.on("change",".tdc-tab-design .tdc-css-bg-position",tdcCssEditor._changeDropDown);a.on("keydown",".tdc-tab-design input.tdc-css-opacity",tdcCssEditor._keydownTextInput);a.on("keyup mousewheel",".tdc-tab-design input.tdc-css-opacity",
tdcCssEditor._changeTextInput);a.on("change keyup",".tdc-tab-design input.tdc-css-color-1-overlay",tdcCssEditor._changeColor);a.on("change keyup",".tdc-tab-design input.tdc-css-color-2-overlay",tdcCssEditor._changeColor);a.on("mousedown",".tdc-tab-design .wp-picker-clear",tdcCssEditor._clearColorPicker);a.on("mousedown",".tdc-tab-design .wp-color-result",tdcCssEditor._showColorPicker);a.on("click",".tdc-tab-design .tdc-inherit-select",tdcCssEditor._inheritSelect);a.on("click",".tdc-tab-design .tdc-inherit-color",
tdcCssEditor._inheritColor);a.on("click",".tdc-tab-design .tdc-css-image-wrap",tdcCssEditor.tdcCssImageWrapHandler);a.on("click",".tdc-tab-design .tdc-css-image-remove",tdcCssEditor.tdcCssImageRemoveHandler);a.on("click",".tdc-tab-design .tdc-inherit-image",tdcCssEditor._inheritImage);a.on("click",".tdc-clear-css-properties",tdcCssEditor._clearCssProperties);a.on("click",".tdc-tab-design .tdc-responsive-buttons > div",function(a){var c=e(this);c.addClass("selected");c.siblings().removeClass("selected");
var h;h="undefined"===typeof window.td_viewport_interval_list?tdcAdminIFrameUI._liveIframeWindowObject.td_viewport_interval_list:window.td_viewport_interval_list;a=tdcAdminIFrameUI.getLiveIframe();c.hasClass("tdc-responsive-all")?(tdcCssEditor._currentViewportSettings={name:"all",settings:d},b.isUndefined(a)||a.css("width","100%")):c.hasClass("tdc-responsive-tablet-landscape")?(tdcCssEditor._currentViewportSettings={name:"landscape",settings:{limitTop:h[2].limitBottom,limitBottom:parseInt(h[1].limitBottom)+
1}},b.isUndefined(a)||a.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop)):c.hasClass("tdc-responsive-tablet-portrait")?(tdcCssEditor._currentViewportSettings={name:"portrait",settings:{limitTop:h[1].limitBottom,limitBottom:parseInt(h[0].limitBottom)+1}},b.isUndefined(a)||a.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop)):c.hasClass("tdc-responsive-phone")&&(tdcCssEditor._currentViewportSettings={name:"phone",settings:{limitTop:h[0].limitBottom,limitBottom:d}},
b.isUndefined(a)||a.css("width",tdcCssEditor._currentViewportSettings.settings.limitTop-300));e(".tdc-responsiveness").replaceWith(tdcCssEditor._generateEditorResponsiveContent());tdcCssEditor.doActionPanelRender();b.isUndefined(a)||(c=a.contents().find(".tdc-element-selected"),c.length&&(c=c.offset().top,a.contents().scrollTop(c)))})},_updateData:function(a){var c=a.data("model_id"),b=a.data("param_name"),d=a.closest(".tdc-tab-content");"undefined"===typeof c?tdcCssEditor.saveWidgetForm(a):(a=tdcIFrameData.getModel(c),
d=tdcCssEditor._generateCssAttValue(d),tdcSidebarController.onUpdate(a,b,"",d))},saveWidgetForm:function(a){var c=a.closest("form");a=a.closest(".tdc-tab-content");if(c.length){var b=c.find('input[name="id_base"]').val(),d=c.find('input[name="widget-id"]').val().replace(b+"-",""),b="'widget-"+b+"["+d+"][tdc_css]'",d=c.find("input[name="+b+"]"),f=tdcCssEditor._generateCssAttValue(a);a.data("tdc_css",f);d.length?d.val(f):c.append('<input type="hidden" name='+b+' value="'+f+'">')}},addWidgetCssEditor:function(a,
c){tdcCssEditor._mappedParameter=a;return tdcCssEditor._generateEditorContent(c)},addComposerCssEditor:function(a,c){tdcCssEditor._mappedParameter=a;tdcCssEditor._model=c;var b=c.get("attrs")[a.param_name];return tdcCssEditor._generateEditorContent(b)},_CsWpColorPicker:function(a){var c=a.closest(".tdc-property-wrap");a.cs_wpColorPicker();c.find(".wp-color-result");c.hasClass(tdcCssEditor._INHERITED_CSS_CLASS)?(c=c.find(".wp-color-result"),""!==a.attr("placeholder")&&c.attr("style","background-color: "+
tdcCssEditor._getRgba(a.attr("placeholder")))):("no_value"===a.val()&&a.val(""),tdcCssEditor._checkDefaultColor(a))},_checkDefaultColor:function(a){var c=a.closest(".tdc-property-wrap").find(".wp-color-result");""===a.val()&&(a=a.data("default_value"),b.isUndefined(a)?c.attr("style",""):c.attr("style","background-color: "+tdcCssEditor._getRgba(a)))},_generateEditorContent:function(a){if(b.isEmpty(a))tdcCssEditor._currentCssSettings=d;else try{var c=JSON.parse(window.atob(a));tdcDebug.log(c);b.isObject(c)?
tdcCssEditor._currentCssSettings=c:tdcCssEditor._currentCssSettings=d}catch(f){tdcCssEditor._currentCssSettings=d,new tdcNotice.notice(f.message,!1,!1)}tdcSidebarPanel._hook.addAction("panel_rendered",function(){e(".tdc-css-image-wrap").each(function(a,c){var f=e(c),g=f.closest(".tdc-property-wrap"),h=g.find(".tdc-css-image-remove"),q=g.find(".tdc-inherit-image"),p={isInherited:!1},u=tdcCssEditor._getSettingsProperty("background-image",d,p);p.isInherited?g.addClass(tdcCssEditor._INHERITED_CSS_CLASS):
g.removeClass(tdcCssEditor._INHERITED_CSS_CLASS);b.isUndefined(u)?(h.addClass("tdc-hidden-button"),q.hide()):("no_value"===u?h.addClass("tdc-hidden-button"):(h.removeClass("tdc-hidden-button"),f.attr("style",'background-image: url("'+u+'")')),"all"!==tdcCssEditor._currentViewportSettings.name&&q.show());f.data("image_link",u)});e(".tdc-inherit").each(function(a,c){var g=e(c),f=g.closest(".tdc-property-wrap");if("all"===tdcCssEditor._currentViewportSettings.name||f.hasClass(tdcCssEditor._INHERITED_CSS_CLASS))g.hide();
else{var h=f.data("tdc-for"),f={isInherited:!1},h=tdcCssEditor._getSettingsProperty(h,d,f);f.isInherited?g.hide():b.isUndefined(h)||g.show()}})});var g=c="",h="";a="";switch(tdcCssEditor._currentViewportSettings.name){case "all":c="selected";break;case "landscape":g="selected";break;case "portrait":h="selected";break;case "phone":a="selected"}c='<div class="tdc-responsive-buttons">'+('<div class="tdc-responsive-all '+c+'" title="Desktop viewport"><span class="tdc-all-icon"></span></div>')+('<div class="tdc-responsive-tablet-landscape '+
g+'" title="Landscape viewport"><span class="tdc-tablet-landscape-icon"></span></div>')+('<div class="tdc-responsive-tablet-portrait '+h+'" title="Portrait viewport"><span class="tdc-tablet-portrait-icon"></span></div>');c+='<div class="tdc-responsive-phone '+a+'" title="Phone viewport"><span class="tdc-phone-icon"></span></div>';c+="</div>";return c+=tdcCssEditor._generateEditorResponsiveContent()},_cleanCss:function(a,c){if("undefined"===typeof c)return d;if("no_value"===c)return c;if("background-image"===
a){var g=/(url\s*\(\s*['"]?)(.*?)\s*(['"]?\s*\))/ig.exec(c);return b.isEmpty(g)?"":g[2]}c=c.toLowerCase();c=c.replace(/!important|px/g,"");return c.trim()},_getDataNoValue:function(a){var c="";"no_value"===a&&(c=' data-no_value="1" ');return c},_generateEditorResponsiveContent:function(){function a(){return k={isInherited:!1}}function c(a){return"all"!==tdcCssEditor._currentViewportSettings.name?'placeholder="'+a+'"':""}function g(){return k.isInherited?" "+tdcCssEditor._INHERITED_CSS_CLASS:""}function h(c,
d){var f=tdcCssEditor._getSettingsProperty(c,d,a()),h="-",e="";k.isInherited&&(h=f,f="");b.isUndefined(m)||"margin-left"!==c&&"margin-right"!==c||(e=m.get("tag"),e="vc_column"===e||"vc_column_inner"===e?" "+tdcCssEditor._INACTIVE_CSS_CLASS:"");return'<input data-tdc-for="'+c+'" name="" type="text" value="'+f+'" class="tdc-css-box-input tdc-css-box-input-'+c+g()+e+'" title="Css '+c+'" placeholder="'+h+'" '+tdcSidebarPanel._getParamterDataAtts(q,m)+"/>"}tdcSidebarPanel._hook.removeAction("panel_css");
var f,q=tdcCssEditor._mappedParameter,m=tdcCssEditor._model,k={isInherited:!1};f='<div class="tdc-responsiveness">'+('<div class="'+tdcSidebarPanel._getParameterClasses(q)+'">');f=f+'<div class="tdc-box-margin"><div class="tdc-margin-label">Margin</div>'+h("margin-top","");f+=h("margin-right","");f+=h("margin-bottom","");f+=h("margin-left","");f=f+'<div class="tdc-box-border"><div class="tdc-border-label">Border</div>'+h("border-top-width","");f+=h("border-right-width","");f+=h("border-bottom-width",
"");f+=h("border-left-width","");f=f+'<div class="tdc-box-padding"><div class="tdc-padding-label">Padding</div>'+h("padding-top","");f+=h("padding-right","");f+=h("padding-bottom","");f+=h("padding-left","");f+="</div></div></div></div>";var l=tdcCssEditor._getSettingsProperty("border-style",d,a());f+='<div class="tdc-property-wrap tdc-border-style tdc-dropdown-big'+g()+'" data-tdc-for="border-style">';f=f+'<div class="tdc-property-title"><span title="Css border-style">Border style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-border-style" '+tdcSidebarPanel._getParamterDataAtts(q,m)+' name="">');f+=tdcCssEditor._generateDropdownOptions([{value:"solid",display:"Solid"},{value:"dotted",display:"Dotted"},{value:"dashed",display:"Dashed"},{value:"none",display:"None"},{value:"hidden",display:"Hidden"},{value:"double",display:"Double"},{value:"groove",display:"Groove"},{value:"ridge",display:"Ridge"},{value:"inset",display:"Inset"},{value:"outset",display:"Outset"},{value:"initial",display:"Initial"},
{value:"inherit",display:"Inherit"}],l);f+="</select></div></div>";var r=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("border-color","",a()),p="";k.isInherited&&(p=l,l="");f+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-border-color'+g()+'" data-tdc-for="border-color">';f=f+'<div class="tdc-property-title"><span title="Css border-color">Border color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-border-color" '+
tdcSidebarPanel._getParamterDataAtts(q,m)+tdcCssEditor._getDataNoValue(l)+' data-default_value="#888888" id="'+r+'" name="" type="text" '+c(p)+' value="'+l+'"/>');f+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+r))});l=tdcCssEditor._getSettingsProperty("border-radius","",a());p="";k.isInherited&&(p=l,l="");f+='<div class="tdc-property-wrap tdc-border-radius tdc-textfield-small'+g()+'" data-tdc-for="border-radius">';f=f+'<div class="tdc-property-title"><span title="Css border-radius">Border radius</span></div><div class="tdc-property">'+
('<input class="tdc-css-border-radius" '+tdcSidebarPanel._getParamterDataAtts(q,m)+' name="" type="text" '+c(p)+' value="'+l+'"/>');f+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator "></div>';var u=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("background-color","",a()),p="";k.isInherited&&(p=l,l="");f+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-bg-color'+g()+'" data-tdc-for="background-color">';
f=f+'<div class="tdc-property-title"><span title="Css background-color">Background color<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-bg-color" '+tdcSidebarPanel._getParamterDataAtts(q,m)+tdcCssEditor._getDataNoValue(l)+' id="'+u+'" name="" type="text" '+c(p)+' value="'+l+'"/>');f+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+u))});tdcCssEditor._getSettingsProperty("background-image",
d,a());f+='<div class="tdc-property-wrap tdc-property-attach_image'+g()+'">';f=f+'<div class="tdc-property-title"><span title="Css background-image">Background image<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-image"></div></span></div><div class="tdc-property">'+('<div class="tdc-css-bg-image tdc-css-image-wrap " '+tdcSidebarPanel._getParamterDataAtts(q,m)+" style=\"background-image: url( '"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png' )\"></div>");
f+='<a class="tdc-css-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';l=tdcCssEditor._getSettingsProperty("background-style",d,a());f+='<div class="tdc-property-wrap tdc-bg-style tdc-dropdown-big'+g()+'" data-tdc-for="background-style">';f=f+'<div class="tdc-property-title"><span title="Css background-size & background-repeat">Background style<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+('<select class="tdc-css-bg-style" '+
tdcSidebarPanel._getParamterDataAtts(q,m)+' name="">');f+=tdcCssEditor._generateDropdownOptions([{value:"cover",display:"Cover"},{value:"contain",display:"Contain"},{value:"no-repeat",display:"No repeat"},{value:"repeat",display:"Repeat"}],l);f+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("background-position",d,a());f+='<div class="tdc-property-wrap tdc-bg-position tdc-dropdown-big'+g()+'" data-tdc-for="background-position">';f=f+'<div class="tdc-property-title"><span title="Css background-position">Background position<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-select"></div></span></div><div class="tdc-property">'+
('<select class="tdc-css-bg-position" '+tdcSidebarPanel._getParamterDataAtts(q,m)+' name="">');f+=tdcCssEditor._generateDropdownOptions([{value:"center top",display:"Center Top"},{value:"center center",display:"Center Center"},{value:"center bottom",display:"Center Bottom"},{value:"left top",display:"Left Top"},{value:"left center",display:"Left Center"},{value:"left bottom",display:"Left Bottom"},{value:"right top",display:"Right Top"},{value:"right center",display:"Right Center"},{value:"right bottom",
display:"Right Bottom"}],l);f+="</select></div></div>";l=tdcCssEditor._getSettingsProperty("opacity","",a());p="";k.isInherited&&(p=l,l="");f+='<div class="tdc-property-wrap tdc-opacity tdc-textfield-small'+g()+'" data-tdc-for="opacity">';f=f+'<div class="tdc-property-title"><span title="Css background-image opacity">Opacity</span></div><div class="tdc-property">'+('<input class="tdc-css-opacity" '+tdcSidebarPanel._getParamterDataAtts(q,m)+' name="" type="text" '+c(p)+' value="'+l+'"/>');f+='</div></div><div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>';
var v=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("color-1-overlay","",a()),p="";k.isInherited&&(p=l,l="");f+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-1-overlay'+g()+'" data-tdc-for="color-1-overlay">';f=f+'<div class="tdc-property-title"><span title="Css gradient color From">Color 1 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+('<input class="tdc-css-color-1-overlay" '+tdcSidebarPanel._getParamterDataAtts(q,
m)+tdcCssEditor._getDataNoValue(l)+' id="'+v+'" name="" type="text" '+c(p)+' value="'+l+'"/>');f+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+v))});var w=b.uniqueId(),l=tdcCssEditor._getSettingsProperty("color-2-overlay","",a()),p="";k.isInherited&&(p=l,l="");f+='<div class="tdc-property-wrap tdc-property-colorpicker tdc-color-2-overlay'+g()+'" data-tdc-for="color-2-overlay">';f=f+'<div class="tdc-property-title"><span  title="Css gradient color To">Color 2 overlay<div title="Revert to desktop settings" class="tdc-inherit tdc-inherit-color"></div></span></div><div class="tdc-property">'+
('<input class="tdc-css-color-2-overlay" '+tdcSidebarPanel._getParamterDataAtts(q,m)+tdcCssEditor._getDataNoValue(l)+' id="'+w+'" name="" type="text" '+c(p)+' value="'+l+'"/>');f+="</div></div>";tdcSidebarPanel._hook.addAction("panel_css",function(){tdcCssEditor._CsWpColorPicker(e("#"+w))});f=f+'<div class="tdc-sidebar-horizontal-separator tdc-property-wrap tdc-property-horizontal_separator tdc-property-separator"></div>'+('<div class="tdc-clear-css-properties" '+tdcSidebarPanel._getParamterDataAtts(q,
m)+' title="Clear all tab css settings">Clear CSS settings</div>');return f+"</div>"},_getAvailableViewportSetting:function(a,c,b){if("undefined"!==typeof tdcCssEditor._currentCssSettings){var d;switch(a){case "all":"undefined"!==typeof tdcCssEditor._currentCssSettings[a]&&(d="all");break;case "landscape":case "portrait":case "phone":"undefined"!==typeof tdcCssEditor._currentCssSettings[a]?d=a:"undefined"!==typeof tdcCssEditor._currentCssSettings.all&&(d="all")}if("undefined"!==typeof d){if("undefined"!==
typeof tdcCssEditor._currentCssSettings[d][c])return tdcCssEditor._currentViewportSettings.name!==d&&(b.isInherited=!0,tdcDebug.log(c)),tdcCssEditor._cleanCss(c,tdcCssEditor._currentCssSettings[d][c]);if("all"!==d)return tdcCssEditor._getAvailableViewportSetting("all",c,b)}}},_getSettingsProperty:function(a,c,b){var d;"undefined"===typeof b&&(b={isInherited:!1});"undefined"!==typeof tdcCssEditor._currentCssSettings&&(d=tdcCssEditor._getAvailableViewportSetting(tdcCssEditor._currentViewportSettings.name,
a,b));"undefined"===typeof d&&"undefined"!==typeof c&&(d=c);return d},_generateDropdownOptions:function(a,c,d){for(var g=[],f,e=!1,m=0,k=0;k<a.length;k++)b.isUndefined(d)||d!==a[k].value||(m=k),f="",b.isUndefined(c)||c!==a[k].value||(f='selected="selected"',e=!0),g.push("<option "+f+' value="'+a[k].value+'">'+a[k].display+"</option>");e||(g[m]='<option selected="selected" value="'+a[m].value+'">'+a[m].display+"</option>");return g.join("")},_generateCssAttValue:function(a){var c={},d=a.find(".tdc-css-box-input-margin-top").val().trim(),
h=a.find(".tdc-css-box-input-margin-right").val().trim(),f=a.find(".tdc-css-box-input-margin-bottom").val().trim(),e=a.find(".tdc-css-box-input-margin-left").val().trim(),m=a.find(".tdc-css-box-input-border-top-width").val().trim(),k=a.find(".tdc-css-box-input-border-right-width").val().trim(),l=a.find(".tdc-css-box-input-border-bottom-width").val().trim(),r=a.find(".tdc-css-box-input-border-left-width").val().trim(),p=a.find(".tdc-css-box-input-padding-top").val().trim(),u=a.find(".tdc-css-box-input-padding-right").val().trim(),
v=a.find(".tdc-css-box-input-padding-bottom").val().trim(),w=a.find(".tdc-css-box-input-padding-left").val().trim(),n=a.find(".tdc-css-border-radius").val().trim(),t=a.find(".tdc-css-opacity").val().trim();""!==d&&(c["margin-top"]=d);""!==h&&(c["margin-right"]=h);""!==f&&(c["margin-bottom"]=f);""!==e&&(c["margin-left"]=e);""!==m&&(c["border-top-width"]=m);""!==k&&(c["border-right-width"]=k);""!==l&&(c["border-bottom-width"]=l);""!==r&&(c["border-left-width"]=r);""!==p&&(c["padding-top"]=p);""!==u&&
(c["padding-right"]=u);""!==v&&(c["padding-bottom"]=v);""!==w&&(c["padding-left"]=w);d=a.find(".tdc-css-border-style");h=d.val().trim();""===h||d.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["border-style"]=h);d=a.find(".tdc-css-border-color");h=d.val().trim();""!==h?c["border-color"]=h:(d=d.data("no_value"),b.isUndefined(d)||1!==d||(c["border-color"]="no_value"));""!==n&&(c["border-radius"]=n);n=a.find(".tdc-css-bg-color");d=n.val().trim();""!==d?c["background-color"]=
d:(n=n.data("no_value"),b.isUndefined(n)||1!==n||(c["background-color"]="no_value"));n=a.find(".tdc-css-bg-image");n.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(n=n.data("image_link"),b.isUndefined(n)||("no_value"===n?c["background-image"]="no_value":""!==n&&(c["background-image"]='url("'+n+'")')));n=a.find(".tdc-css-bg-style");d=n.val().trim();""===d||n.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-style"]=d);n=a.find(".tdc-css-bg-position");
d=n.val().trim();""===d||n.closest(".tdc-property-wrap").hasClass(tdcCssEditor._INHERITED_CSS_CLASS)||(c["background-position"]=d);""!==t&&(c.opacity=t);t=a.find(".tdc-css-color-1-overlay");n=t.val().trim();""!==n?c["color-1-overlay"]=n:(t=t.data("no_value"),b.isUndefined(t)||1!==t||(c["color-1-overlay"]="no_value"));a=a.find(".tdc-css-color-2-overlay");t=a.val().trim();""!==t?c["color-2-overlay"]=t:(a=a.data("no_value"),b.isUndefined(a)||1!==a||(c["color-2-overlay"]="no_value"));b.isUndefined(tdcCssEditor._currentCssSettings)&&
(tdcCssEditor._currentCssSettings={});b.isUndefined(c["border-style"])||"solid"!==c["border-style"]||("all"===tdcCssEditor._currentViewportSettings.name||b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all["border-style"]))&&delete c["border-style"];b.isUndefined(c["background-style"])||"cover"!==c["background-style"]||("all"===tdcCssEditor._currentViewportSettings.name||b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all["background-style"]))&&
delete c["background-style"];b.isUndefined(c["background-position"])||"center top"!==c["background-position"]||("all"===tdcCssEditor._currentViewportSettings.name||b.isUndefined(tdcCssEditor._currentCssSettings.all)||b.isUndefined(tdcCssEditor._currentCssSettings.all["background-position"]))&&delete c["background-position"];tdcDebug.log(c);b.isEmpty(c)?(delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+
"_max_width"],delete tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]):(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name]=c,b.isUndefined(tdcCssEditor._currentViewportSettings.settings)||(tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_max_width"]=tdcCssEditor._currentViewportSettings.settings.limitTop,tdcCssEditor._currentCssSettings[tdcCssEditor._currentViewportSettings.name+"_min_width"]=tdcCssEditor._currentViewportSettings.settings.limitBottom));
tdcDebug.log(tdcCssEditor._currentCssSettings);tdcDebug.log("JSON.stringify");tdcDebug.log(JSON.stringify(tdcCssEditor._currentCssSettings));return b.isEmpty(tdcCssEditor._currentCssSettings)?"":window.btoa(JSON.stringify(tdcCssEditor._currentCssSettings))},_getRgba:function(a){return-1!==a.indexOf("rgb")?a:(a=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a))?"rgb("+parseInt(a[1],16)+", "+parseInt(a[2],16)+", "+parseInt(a[3],16)+")":""}}})(jQuery,_);var tdcSidebarPanel={};
(function(e){tdcSidebarPanel={_defaultGroupName:"General",_currentBoundModel:e,_hook:{_hooks:[],addAction:function(b,d){_.isUndefined(tdcSidebarPanel._hook._hooks[b])&&(tdcSidebarPanel._hook._hooks[b]=[]);tdcSidebarPanel._hook._hooks[b].push(d)},doAction:function(b,d){if(!_.isUndefined(tdcSidebarPanel._hook._hooks[b]))for(var a=0;a<tdcSidebarPanel._hook._hooks[b].length;a++)tdcSidebarPanel._hook._hooks[b][a](d)},removeAction:function(b){_.isUndefined(tdcSidebarPanel._hook._hooks[b])||delete tdcSidebarPanel._hook._hooks[b]}},
init:function(){var b=jQuery("body");b.on("change focus",".tdc-tab-no-design .tdc-property-dropdown:not(.tdc-row-col-dropdown):not(.tdc-innerRow-col-dropdown) select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{var a=jQuery(this);b=a.val();var c=tdcIFrameData.getModel(a.data("model_id")),a=a.data("param_name");tdcSidebarController.onUpdate(c,a,this.oldValue,b);this.oldValue=b;"block_template_id"===a&&setTimeout(function(){tdcSidebar.setSettings({$currentRow:tdcSidebar.getCurrentRow(),
$currentColumn:tdcSidebar.getCurrentColumn(),$currentInnerRow:tdcSidebar.getCurrentInnerRow(),$currentInnerColumn:tdcSidebar.getCurrentInnerColumn(),$currentElement:tdcSidebar.getCurrentElement()},!0)},500)}});b.on("keyup focus",".tdc-tab-no-design .tdc-property-textfield input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,
_.escape(b));this.oldValue=b}});b.on("focus change",".tdc-tab-no-design .tdc-property-checkbox input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this);var a=b.val();b.is(":checked")||(a="");var c=tdcIFrameData.getModel(b.data("model_id"));tdcSidebarController.onUpdate(c,b.data("param_name"),this.oldValue,a);this.oldValue=a}});b.on("click",".tdc-tab-no-design .tdc-image-wrap",tdcSidebarPanel.tdcImageWrapHandler);b.on("click",".tdc-tab-no-design .tdc-image-remove",tdcSidebarPanel.tdcImageRemoveHandler);
b.on("change keyup focus",".tdc-tab-no-design .tdc-property-colorpicker input",function(b){if("focusin"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});b.on("change focus",".tdc-tab-no-design .tdc-row-col-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=
tdcSidebar.getCurrentRow().data("model_id"),a=tdcIFrameData.getModel(a);"11"===this.oldValue&&("23_13"===b||"13_23"===b||"13_13_13"===b)||"23_13"===this.oldValue&&("11"===b||"13_23"===b||"13_13_13"===b)||"13_23"===this.oldValue&&("11"===b||"23_13"===b||"13_13_13"===b)||"13_13_13"===this.oldValue&&("11"===b||"23_13"===b||"13_23"===b)?(tdcIFrameData.changeRowModel(a,this.oldValue,b),a.getShortcodeRender(1,null,!0)):new tdcNotice.notice("Invalid row change detected: this.oldValue:"+this.oldValue+" and curValue: "+
b,!1,!0);this.oldValue=b}});b.on("change focus",".tdc-tab-no-design .tdc-innerRow-col-dropdown select",function(b){if("focusin"===b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcSidebar._$currentInnerRow.data("model_id"),a=tdcIFrameData.getModel(a);tdcIFrameData.changeInnerRowModel(a,this.oldValue,b);a.getShortcodeRender(tdcIFrameData.getColumnNumber(a),null,!0);this.oldValue=b}});b.on("change focus",".tdc-tab-no-design .tdc-widget-sidebar-dropdown select",function(b){if("focusin"===
b.type||"focus"===b.type)this.oldValue=this.value;else{b=jQuery(this).val();var a=tdcIFrameData.getModel(jQuery(this).data("model_id"));tdcSidebarController.onUpdate(a,jQuery(this).data("param_name"),this.oldValue,b);this.oldValue=b}});b.on("click",".tdc-tab-no-design .tdc-open-wpeditor",function(b){b.preventDefault();var a=jQuery(this);b=jQuery("#tdc-wpeditor");var c=b.children(".content"),d=a.data("model_id"),a=a.data("mapped_parameter_name");c.addClass("tdc-dropped");c.html('<iframe id="tdc-iframe-wpeditor" src="'+
window.tdcAdminSettings.pluginUrl+'/includes/wpeditor.php" scrolling="auto" style="width: 100%; height: 100%" data-model_id="'+d+'" data-mapped_parameter_name="'+a+'"></iframe>');b.show()});b.on("click","#tdc-wpeditor #tdc-iframe-close-button",function(b){b.preventDefault();jQuery("#tdc-wpeditor").hide()})},tdcImageWrapHandler:function(b){var d=jQuery(b.currentTarget);d.closest(".tdc-tab-content");window.original_send_to_editor=window.send_to_editor;wp.media.editor.open(d);jQuery(".media-menu .media-menu-item:nth-of-type(2)").addClass("hidden");
jQuery(".media-menu .media-menu-item:nth-of-type(3)").addClass("hidden");jQuery(".media-menu .media-menu-item:nth-of-type(4)").addClass("hidden");window.send_to_editor=function(a){var b=jQuery("img",a).attr("src"),g="";"undefined"===typeof b?(b=jQuery(a).attr("src"),g=jQuery(a).attr("class")):g=jQuery("img",a).attr("class");jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/get_image_id","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",
window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_class:g,action:"tdc_ajax_get_image_id"}}).done(function(a,c,g){"success"===c&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(d.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button"),d.attr("style","background-image: url( '"+b+"') "),d.data("image_link",b),d.data("image_id",a.image_id),d.removeClass("tdc-no-image-selected"),window.send_to_editor=window.original_send_to_editor,window.tb_remove(),
c="",g=d.data("model_id"),g=tdcIFrameData.getModel(g),d.hasClass("tdc-no-image-selected")||(c=a.image_id.toString()),tdcSidebarController.onUpdate(g,d.data("param_name"),"",c)))}).fail(function(a,b,c){})};return!1},tdcImageRemoveHandler:function(b){var d=jQuery(b.currentTarget);b=d.closest(".tdc-property-wrap").find(".tdc-image-wrap");d.addClass("tdc-hidden-button");b.addClass("tdc-no-image-selected");jQuery.removeData(b,"image_link");b.attr("style","background-image: url( '"+window.tdcAdminSettings.pluginUrl+
"/assets/images/sidebar/no_img.png'");d=b.data("model_id");d=tdcIFrameData.getModel(d);tdcSidebarController.onUpdate(d,b.data("param_name"),"","")},bindPanelToModel:function(b,d){if(_.isUndefined(tdcSidebarPanel._currentBoundModel)||tdcSidebarPanel._currentBoundModel.cid!==b.cid||!_.isUndefined(d)&&(_.isUndefined(d)||!0===d)){var a=window.tdcAdminSettings.mappedShortcodes[b.attributes.tag];tdcSidebarPanel._deletePanel();jQuery(".tdc-empty-sidebar").hide();tdcSidebarPanel._currentBoundModel=b;for(var c=
[],g=0;g<a.params.length;g++){var h=tdcSidebarPanel._defaultGroupName;_.isEmpty(a.params[g].group)||(h=a.params[g].group);c.push(h)}var c=_.uniq(c),f=h="",e=tdcSidebar.getCurrentTabId(),m,k,l,r,h=h+'<div class="tdc-tabs">';l=k=m="";for(g=0;g<c.length;g++)f=tdcSidebarPanel._fixGroupName(c[g]),r=tdcUtil.makeSafeForCSS(f),0===g?(m='<a href="#" data-tab-id="td-tab-'+r+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>",k='<a href="#" data-tab-id="td-tab-'+r+'" title="'+f+' settings">'+f+"</a>"):
_.isUndefined(e)||e!=="td-tab-"+r?l+='<a href="#" data-tab-id="td-tab-'+r+'" title="'+f+' settings">'+f+"</a>":(m=k,l+='<a href="#" data-tab-id="td-tab-'+r+'" class="tdc-tab-active" title="'+f+' settings">'+f+"</a>");h=h+(m+l)+'</div><div class="tdc-tab-content-wrap">';l=k=m="";for(g=0;g<c.length;g++)f=tdcSidebarPanel._fixGroupName(c[g]),r=tdcUtil.makeSafeForCSS(f),f="tdc-tab-no-design","css"===r&&(f="tdc-tab-design"),0===g?(m='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+
r+'">',k='<div class="tdc-tab-content '+f+'" id="td-tab-'+r+'">'):_.isUndefined(e)||e!=="td-tab-"+r?l+='<div class="tdc-tab-content '+f+'" id="td-tab-'+r+'">':(m=k,l+='<div class="tdc-tab-content tdc-tab-content-visible '+f+'" id="td-tab-'+r+'">'),l+=tdcSidebarPanel._bindGroupAndGetHtml(c[g],a,b),l+="</div>";h=h+(m+l)+"</div>";jQuery(".tdc-inspector .tdc-tabs-wrapper").html(h);jQuery(".tdc-breadcrumbs").show();tdcSidebarPanel._hook.doAction("panel_rendered");tdcSidebarPanel._hook.doAction("panel_css");
(function(){if("vc_row"===b.get("tag")){var a=jQuery("body .tdc-row-col-dropdown select"),c=jQuery("body .tdc-row-stretch-dropdown select"),d=b.get("childCollection");if(!_.isUndefined(d)){d=tdcIFrameData.getChildCollectionWidths(d);_.isUndefined(d)&&(d="11");a.val(d);var a=b.get("attrs"),f;_.has(a,"full_width")&&(f=a.full_width);_.isUndefined(f)&&(f="");c.val(f)}}})();(function(){if("vc_row_inner"===b.get("tag")){var a=jQuery("body .tdc-innerRow-col-dropdown select"),c=b.get("childCollection");if(!_.isUndefined(c)){c=
tdcIFrameData.getChildCollectionWidths(c);_.isUndefined(c)&&(c="11");a.val(c);var c=b.get("parentModel").get("attrs"),d="";_.has(c,"width")&&(d=c.width.replace("/",""));switch(d){case "":a.find("option[value=12_12]").hide();a.find("option[value=23_13]").show();a.find("option[value=13_23]").show();a.find("option[value=13_13_13]").show();break;case "13":a.find("option[value=12_12]").hide();a.find("option[value=23_13]").hide();a.find("option[value=13_23]").hide();a.find("option[value=13_13_13]").hide();
break;case "23":a.find("option[value=12_12]").show(),a.find("option[value=23_13]").hide(),a.find("option[value=13_23]").hide(),a.find("option[value=13_13_13]").hide()}}}})()}},_bindGroupAndGetHtml:function(b,d,a){var c="",g=window.tdcAdminSettings.mappedBlockTemplates,h=a.get("attrs");if(_.has(h,"block_template_id")&&!_.isEmpty(h.block_template_id)){for(var h=h.block_template_id,f,e,m,k=0;k<d.params.length;k++)"custom_title"===d.params[k].param_name?f=k:"custom_url"===d.params[k].param_name?e=k:"block_template_id"===
d.params[k].param_name&&(m=k);_.isUndefined(f)||(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[f].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[f],a)):d.params[f].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[f],a)));_.isUndefined(e)||(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[e].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[e],a)):d.params[e].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[e],a)));_.isUndefined(m)||(b===
tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[m].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[m],a)):d.params[m].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[m],a)));for(k=0;k<g[h].params.length;k++)b===tdcSidebarPanel._defaultGroupName?_.isEmpty(g[h].params[k].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(g[h].params[k],a)):g[h].params[k].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(g[h].params[k],a));for(k=0;k<d.params.length;k++)_.isEmpty(d.params[k].td_type)&&
"custom_title"!==d.params[k].param_name&&"custom_url"!==d.params[k].param_name&&"block_template_id"!==d.params[k].param_name&&(b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[k].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],a)):d.params[k].group===b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],a)))}else for(k=0;k<d.params.length;k++)b===tdcSidebarPanel._defaultGroupName?_.isEmpty(d.params[k].group)&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],a)):d.params[k].group===
b&&(c+=tdcSidebarPanel._bindParamAndGetHtml(d.params[k],a));return c},_bindParamAndGetHtml:function(b,d){switch(b.type){case "colorpicker":return tdcSidebarPanel.addColorpicker(b,d);case "dropdown":return tdcSidebarPanel.addDropDown(b,d);case "checkbox":return tdcSidebarPanel.addCheckBox(b,d);case "attach_image":return tdcSidebarPanel.addUploadImage(b,d);case "textfield":return tdcSidebarPanel.addTextField(b,d);case "textarea_html":return tdcSidebarPanel.addTextAreaHtml(b,d);case "textarea_raw_html":return tdcSidebarPanel.addTextAreaRawHtml(b,
d);case "css_editor":return"";case "tdc_css_editor":return tdcCssEditor.init(),tdcCssEditor.addComposerCssEditor(b,d);case "horizontal_separator":return tdcSidebarPanel.addSeparatorHorizontal(b,d);default:return b.param_name+" - "+b.type+"<br>"}},_deletePanel:function(){tdcDebug.log("clear _deletePanel ");tdcSidebarPanel._hook._hooks=[];tdcSidebarPanel._currentBoundModel=e;jQuery(".tdc-breadcrumbs").hide();jQuery(".tdc-inspector .tdc-current-element-head").empty();jQuery(".tdc-inspector .tdc-tabs-wrapper").empty();
jQuery(".tdc-empty-sidebar").show();tdcSidebar.hideWpeditor()},_getParameterClasses:function(b){var d;d="tdc-property-wrap tdc-property-"+b.type;d+=" tdc-property-"+b.param_name;_.isUndefined(b["class"])||(d+=" "+b["class"]);return d},_getParameterCurrentValue:function(b,d){return _.isEmpty(d.get("attrs")[b.param_name])?"dropdown"===b.type||_.isEmpty(b.value)?"":b.value:d.get("attrs")[b.param_name]},_getParameterDomName:function(b){return"tdc-param-"+b.param_name},_getParamterDataAtts:function(b,
d){var a="";if("undefined"===typeof d)return a;a+=' data-model_id="'+d.cid+'"';"undefined"!==typeof b&&(a+=' data-param_name="'+b.param_name+'"');return a},_fixGroupName:function(b){switch(b){case "Design options":return"Css";case "Pagination":return"Extra";case "Ajax filter":return"Ajax"}return b},clearPanel:function(){tdcSidebarPanel._deletePanel()},addColorpicker:function(b,d){var a="";_.has(b,"description")&&""!==b.description&&(a=' title="'+b.description+'" ');var c="",g=_.uniqueId(),c=c+('<div class="'+
tdcSidebarPanel._getParameterClasses(b)+'">'),c=c+('<div class="tdc-property-title"><span'+a+">"+b.heading+"</span></div>"),c=c+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(b,d)+' id="'+g+'" name="'+tdcSidebarPanel._getParameterDomName(b)+'" type="text" value="'+tdcSidebarPanel._getParameterCurrentValue(b,d)+'"/>'),c=c+"</div></div>";tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery("#"+g).cs_wpColorPicker()});return c},addDropDown:function(b,d){for(var a=
"",c="",g=Object.keys(b.value),e=0;e<g.length;e++){var f=b.value[g[e]],q=tdcSidebarPanel._getParameterCurrentValue(b,d),m="";String(q)===String(f)&&(m=' selected="selected" ');c+="<option "+m+' value="'+f+'">'+g[e]+"</option>"}g="";_.has(b,"description")&&""!==b.description&&(g=' title="'+b.description+'" ');a+='<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">';a+='<div class="tdc-property-title"><span'+g+">"+b.heading+"</span></div>";a=a+'<div class="tdc-property">'+("<select "+tdcSidebarPanel._getParamterDataAtts(b,
d)+' name="'+tdcSidebarPanel._getParameterDomName(b)+'">');a=a+c+"</select></div>";return a+="</div>"},addCheckBox:function(b,d){var a="";_.has(b,"description")&&""!==b.description&&(a=' title="'+b.description+'" ');var c="";""!==tdcSidebarPanel._getParameterCurrentValue(b,d)&&(c=" checked ");var e;e=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');e+='<div class="tdc-property-title"><span'+a+">"+b.heading+"</span></div>";e=e+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(b,
d)+' name="'+tdcSidebarPanel._getParameterDomName(b)+'" type="checkbox" value="yes" '+c+"/>");return e+"</div></div>"},addUploadImage:function(b,d){var a="";_.has(b,"description")&&""!==b.description&&(a=' title="'+b.description+'" ');var c;c=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');c+='<div class="tdc-property-title"><span'+a+">"+b.heading+"</span></div>";c=c+'<div class="tdc-property">'+('<div class="tdc-image-wrap tdc-no-image-selected" '+tdcSidebarPanel._getParamterDataAtts(b,
d)+" style=\"background-image: url('"+window.tdcAdminSettings.pluginUrl+"/assets/images/sidebar/no_img.png')\">");c+='</div><a class="tdc-image-remove tdc-hidden-button" href="#" >Remove</a></div></div>';tdcSidebarPanel._hook.addAction("panel_rendered",function(){jQuery(".tdc-image-wrap").each(function(a,c){var f=jQuery(c);if(!f.parent().parent(".tdc-bg-upload").length&&b.param_name===f.data("param_name")){var e=tdcSidebarPanel._getParameterCurrentValue(b,d);""!==e&&jQuery.ajax({timeout:1E4,type:"POST",
url:tdcUtil.getRestEndPoint("td-composer/get_image_url","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{image_id:e,action:"tdc_ajax_get_image_url"}}).done(function(a,b,c){"success"===b&&(_.isObject(a)&&_.has(a,"errors")?new tdcNotice.notice(a.errors,!0,!1):(f.attr("style","background-image: url('"+a.image_url+"')").removeClass("tdc-no-image-selected"),f.data("image_link",a.image_url),f.data("image_id",
e),f.closest(".tdc-property").find(".tdc-image-remove").removeClass("tdc-hidden-button")))}).fail(function(a,b,c){})}})});return c},addTextArea:function(){},addTextField:function(b,d){var a="",c="";if(_.has(b,"description")&&""!==b.description){var e=jQuery("<div>"+b.description+"</div>");b.description===e.text()?a=' title="'+b.description+'" ':c='<div class="tdc-description">'+b.description+"</div>"}e=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');e+='<div class="tdc-property-title"><span'+
a+">"+b.heading+"</span></div>";e=e+'<div class="tdc-property">'+("<input "+tdcSidebarPanel._getParamterDataAtts(b,d)+' name="'+tdcSidebarPanel._getParameterDomName(b)+'" type="text" value="'+tdcSidebarPanel._getParameterCurrentValue(b,d)+'"/>');return e=e+c+"</div></div>"},addTextAreaHtml:function(b,d){_.has(b,"description");var a='<a href="#" class="tdc-open-wpeditor" data-model_id="'+d.cid+'" data-mapped_parameter_name="'+b.param_name+'">Edit Content</a>';tdcSidebarPanel._hook.addAction("panel_rendered",
function(){});return a},addTextAreaRawHtml:function(b,d){var a=_.uniqueId("tdc_textarea_"),c="";_.has(b,"description")&&""!==b.description&&(c=' title="'+b.description+'" ');var e;e=""+('<div class="'+tdcSidebarPanel._getParameterClasses(b)+'">');e+='<div class="tdc-property-title"><span'+c+">"+b.heading+"</span></div>";e=e+'<div class="tdc-property">'+('<textarea id="'+a+'" class="tdc-textarea" '+tdcSidebarPanel._getParamterDataAtts(b,d)+">"+tdcSidebarPanel._getParameterCurrentValue(b,d)+"</textarea>");
e+="</div></div>";jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/decode_html_content","uuid="+tdcJobManager._getUniqueID()),beforeSend:function(a){a.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},dataType:"json",data:{post_id:window.tdcPostSettings.postId,action:"tdc_ajax_decode_html_content",content:tdcSidebarPanel._getParameterCurrentValue(b,d)}}).done(function(b,c,d){"success"===c&&(_.isObject(b)&&_.has(b,"errors")?new tdcNotice.notice(b.errors,
!0,!1):jQuery("#"+a).html(b.parsed_content).show())}).fail(function(a,b,c){});jQuery("body").on("keyup","#"+a,function(a){a=jQuery(a.target);var b=tdcIFrameData.getModel(a.data("model_id")),c=window.btoa(a.val());tdcSidebarController.onUpdate(b,a.data("param_name"),c,c)});return e},addSeparatorHorizontal:function(b,d){return""+('<div class="tdc-sidebar-horizontal-separator '+tdcSidebarPanel._getParameterClasses(b)+'"></div>')}}})();var tdcUtil={};
(function(){tdcUtil={getRestEndPoint:function(e,b){return _.isEmpty(window.tdcAdminSettings.permalinkStructure)?window.tdcAdminSettings.wpRestUrl+e+"&"+b:window.tdcAdminSettings.wpRestUrl+e+"?"+b},makeSafeForCSS:function(e){return e.replace(/[^a-z0-9]/g,function(b){var d=b.charCodeAt(0);return 32===d?"-":65<=d&&90>=d?b.toLowerCase():"__"+("000"+d.toString(16)).slice(-4)})}}})();var tdcJobManager={};
(function(){tdcJobManager={_sentJobs:{},totalJobsCount:0,job:function(){this.shortcode="";this.columns=0;this.error_callback=this.success_callback=this.blockUid=""},jobRequest:function(e){this.shortcode=e.shortcode;this.columns=e.columns;this.jobId=tdcJobManager._generateJobId();this.postId=window.tdcPostSettings.postId;this.replyHtml=""},addJob:function(e){tdcMain.setContentModified();tdcDebug.group("%c tdcJobManager.addJob","background-color:#2489c2; color:white");var b=new tdcJobManager.jobRequest(e);
jQuery.ajax({timeout:1E4,type:"POST",url:tdcUtil.getRestEndPoint("td-composer/do_job","tmp_jobId="+b.jobId+"&tmp_blockUid="+b.blockUid+"&uuid="+tdcJobManager._getUniqueID()),beforeSend:function(b){b.setRequestHeader("X-WP-Nonce",window.tdcAdminSettings.wpRestNonce)},cache:!1,data:b,dataType:"json",statusCode:{404:function(){console.log("tdcJobManager.addJob - ERROR: 404 not found")},500:function(){console.log("tdcJobManager.addJob - ERROR: 500 server error")}},success:function(d,a,c){null===d?e.error(b,
"tdcJobManager.addJob - ERROR: Empty response received from server"):(!0===tdcJobManager._isJobCallbackReplyValid(e.blockUid,d.jobId)?e.success_callback(d):tdcDebug.log("tdcJobManager.addJob - dropped job :) (probably it's older than the last timestamp)"),tdcDebug.groupEnd())},error:function(d,a,c){e.error_callback(b,"tdcJobManager.addJob - Error callback - textStatus: "+a+" errorThrown: "+c);tdcDebug.groupEnd()}})},_isJobCallbackReplyValid:function(e,b){return"undefined"===typeof tdcJobManager._sentJobs[e]||
parseInt(tdcJobManager._sentJobs[e])<parseInt(b)?(tdcJobManager._sentJobs[e]=b,!0):!1},_generateJobId:function(){var e=tdcJobManager.totalJobsCount;tdcJobManager.totalJobsCount++;return e},_getUniqueID:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}})();
